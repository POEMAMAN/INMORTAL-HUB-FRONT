"use strict";(self.webpackChunktrabajo_final=self.webpackChunktrabajo_final||[]).push([[547],{2547:(M,d,c)=>{c.r(d),c.d(d,{AuthModule:()=>w});var g=c(6814),a=c(9351),t=c(4946),s=c(95),p=c(3721);function h(e,m){if(1&e&&(t.TgZ(0,"div")(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"button",15),t._uU(4,"Ir al login"),t.qZA()()),2&e){const o=t.oxw();t.xp6(2),t.Oqu(o.message)}}function f(e,m){1&e&&(t.TgZ(0,"div",16)(1,"h2"),t._uU(2,"Procesando.."),t.qZA()())}function b(e,m){if(1&e&&(t.TgZ(0,"div")(1,"h2"),t._uU(2),t.qZA()()),2&e){const o=t.oxw();t.xp6(2),t.Oqu(o.message)}}let x=(()=>{class e{constructor(o,n,i){this.fb=o,this.authService=n,this.router=i,this.message="",this.status="disabled",this.registerForm=this.fb.group({name:["",s.kI.required],surname:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.minLength(8),s.kI.maxLength(12)]]})}formHandler(){if(this.status="loading",this.registerForm.valid){const{name:o,surname:n,email:i,password:r}=this.registerForm.value;this.authService.register({name:o,surname:n,email:i,password:r}).subscribe({next:l=>{this.status="success",this.message=l.msg},error:l=>{console.log(l),this.status="unauthorized",this.message=l.error.msg}}),this.registerForm.reset()}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(s.qu),t.Y36(p.e),t.Y36(a.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-register-form"]],decls:25,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","formControlName","name","required",""],["for","surname"],["type","surname","id","surname","name","surname","formControlName","surname","required",""],["for","email"],["type","email","id","email","name","email","formControlName","email","required",""],["for","password"],["type","text","id","password","name","password","required",""],[1,"button-container"],["type","submit",1,"button-register"],[1,"button-register",3,"routerLink"],[4,"ngIf"],["class","spinner",4,"ngIf"],["routerLink","'login'"],[1,"spinner"]],template:function(n,i){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.formHandler()}),t.TgZ(1,"div",1)(2,"label",2),t._uU(3,"Nombre:"),t.qZA(),t._UZ(4,"input",3),t.qZA(),t.TgZ(5,"div",1)(6,"label",4),t._uU(7,"Apellido:"),t.qZA(),t._UZ(8,"input",5),t.qZA(),t.TgZ(9,"div")(10,"label",6),t._uU(11,"Correo electronico:"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",1)(14,"label",8),t._uU(15,"Contrase\xf1a:"),t.qZA(),t._UZ(16,"input",9),t.qZA(),t.TgZ(17,"div",10)(18,"button",11),t._uU(19,"Registrarse"),t.qZA(),t.TgZ(20,"button",12),t._uU(21,"Volver"),t.qZA()()(),t.YNc(22,h,5,1,"div",13),t.YNc(23,f,3,0,"div",14),t.YNc(24,b,3,1,"div",13)),2&n&&(t.Q6J("formGroup",i.registerForm),t.xp6(20),t.Q6J("routerLink","/main"),t.xp6(2),t.Q6J("ngIf","success"===i.status),t.xp6(1),t.Q6J("ngIf","loading"===i.status),t.xp6(1),t.Q6J("ngIf","unauthorized"===i.status))},dependencies:[g.O5,a.rH,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:15px}h2[_ngcontent-%COMP%]{color:#daa520;text-decoration:underline}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-family:Merienda;font-size:25px}input[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box;border-radius:40em;height:40px;background-color:#daa520}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.button-register[_ngcontent-%COMP%], .button-show[_ngcontent-%COMP%]{appearance:none;background-color:#fff;border-radius:40em;border-style:none;box-shadow:#adcfff 0 -12px 6px inset;box-sizing:border-box;color:#000;cursor:pointer;display:inline-block;font-family:-apple-system,sans-serif;font-size:1.2rem;font-weight:700;letter-spacing:-.24px;outline:none;padding:1rem 1.3rem;quotes:auto;text-align:center;text-decoration:none;transition:all .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;display:flex;align-items:center;margin:5px;height:40px}.button-register[_ngcontent-%COMP%]:hover{background-color:#ffc229;box-shadow:#ff6314 0 -6px 8px inset;transform:scale(1.125)}.button-register[_ngcontent-%COMP%]:active{transform:scale(1.025)}@media (min-width: 400px){.button-register[_ngcontent-%COMP%]{font-size:15px;height:40px}}@media (min-width: 600px){.button-register[_ngcontent-%COMP%]{font-size:20px;height:40px}}"]})}return e})(),_=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-register-page"]],decls:4,vars:0,consts:[[1,"auth-container"],[1,"auth-container-title"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Formulario de registro"),t.qZA(),t._UZ(3,"app-register-form"),t.qZA())},dependencies:[x],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.auth-container-title[_ngcontent-%COMP%]{width:50vw;display:flex;text-align:center;justify-content:center;color:#daa520;text-decoration:overline;font-size:260%}"]})}return e})();function C(e,m){if(1&e&&(t.TgZ(0,"div")(1,"button",11),t._uU(2,"Si no estas registrado."),t.qZA(),t.TgZ(3,"h2"),t._uU(4),t.qZA()()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("routerLink","/auth/register"),t.xp6(3),t.Oqu(o.message)}}let Z=(()=>{class e{constructor(o,n){this.authService=o,this.router=n,this.message="",this.status="disabled",this.email="",this.password="",this.hidePassword=!0}handleLogin(){this.authService.login({email:this.email,password:this.password}).subscribe({next:r=>{r&&(sessionStorage.setItem("token-app",JSON.stringify(r.token)),this.router.navigate(["library"]))},error:r=>{console.log(r),this.status="not registered",this.message=r.error.msg,console.log(r)}})}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.e),t.Y36(a.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login-form"]],decls:21,vars:5,consts:[[3,"ngSubmit"],[1,"form-group-user"],["for","email"],["type","text","id","email","name","email","required","",3,"ngModel","ngModelChange"],[1,"form-group-password"],["for","password"],[1,"input-pass"],["id","password","name","password","required","",3,"type","ngModel","ngModelChange"],["type","checkbox",1,"button-show",3,"click"],[1,"button-container"],["type","submit",1,"button-session"],[1,"button-session",3,"routerLink"],[4,"ngIf"]],template:function(n,i){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.handleLogin()}),t.TgZ(1,"p"),t._uU(2,"Acceso a la Web (Login)"),t.qZA(),t.TgZ(3,"div",1)(4,"label",2),t._uU(5,"Usuario:"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(u){return i.email=u}),t.qZA()(),t.TgZ(7,"div",4)(8,"label",5),t._uU(9,"Contrase\xf1a:"),t.qZA(),t.TgZ(10,"div",6)(11,"input",7),t.NdJ("ngModelChange",function(u){return i.password=u}),t.qZA(),t.TgZ(12,"input",8),t.NdJ("click",function(){return i.togglePasswordVisibility()}),t.qZA()()(),t.TgZ(13,"div",9)(14,"button",10),t._uU(15,"Iniciar sesi\xf3n"),t.qZA(),t.TgZ(16,"button",11),t._uU(17,"Volver"),t.qZA()(),t._UZ(18,"br")(19,"br"),t.qZA(),t.YNc(20,C,5,2,"div",12)),2&n&&(t.xp6(6),t.Q6J("ngModel",i.email),t.xp6(5),t.s9C("type",i.hidePassword?"password":"text"),t.Q6J("ngModel",i.password),t.xp6(5),t.Q6J("routerLink","/main"),t.xp6(4),t.Q6J("ngIf","not registered"===i.status))},dependencies:[g.O5,a.rH,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F],styles:[".form-group-user[_ngcontent-%COMP%], .form-group-password[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-family:Merienda;font-size:25px}input[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box;border-radius:40em;height:40px;background-color:#daa520}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.button-session[_ngcontent-%COMP%]{appearance:none;background-color:#fff;border-radius:40em;border-style:none;box-shadow:#adcfff 0 -12px 6px inset;box-sizing:border-box;color:#000;cursor:pointer;display:inline-block;font-family:-apple-system,sans-serif;font-size:1.17rem;font-weight:700;letter-spacing:-.24px;outline:none;padding:1rem 1.3rem;quotes:auto;text-align:center;text-decoration:none;transition:all .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation;display:flex;align-items:center;margin:5px;height:40px}.button-sesion[_ngcontent-%COMP%]:hover{background-color:#ffc229;box-shadow:#ff6314 0 -6px 8px inset;transform:scale(1.125)}.button-sesion[_ngcontent-%COMP%]:active{transform:scale(1.025)}.input-pass[_ngcontent-%COMP%]{position:relative}.button-show[_ngcontent-%COMP%]{position:absolute;top:10%;right:3%;width:8%;visibility:hidden}.button-show[_ngcontent-%COMP%]:after{content:url(https://res.cloudinary.com/dqh5ovfj1/image/upload/v1711188082/Varios/eye-regular_eztye9.svg);visibility:visible;cursor:pointer}.button-show[_ngcontent-%COMP%]:checked:after{content:url(https://res.cloudinary.com/dqh5ovfj1/image/upload/v1711188110/Varios/eye-slash-regular_w1maq8.svg)}@media (min-width: 400px){.button-session[_ngcontent-%COMP%]{font-size:15px;height:40px}}@media (min-width: 100px){.button-session[_ngcontent-%COMP%]{font-size:20px;height:40px}}"]})}return e})();const v=[{path:"",children:[{path:"register",component:_},{path:"login",component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login-page"]],decls:4,vars:0,consts:[[1,"auth-container"],[1,"auth-container-title"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Iniciar sesi\xf3n"),t.qZA(),t._UZ(3,"app-login-form"),t.qZA())},dependencies:[Z],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.auth-container-title[_ngcontent-%COMP%]{width:50vw;display:flex;text-align:center;justify-content:center;color:#daa520;text-decoration:overline;font-size:260%}"]})}return e})()},{path:"confirm-user/:token",component:(()=>{class e{constructor(o,n){this.route=o,this.authService=n,this.token="",this.message=""}ngOnInit(){this.route.params.subscribe(o=>{this.token=o.token})}ngAfterViewInit(){console.log(this.token),this.authService.confirmUser(this.token).subscribe(o=>{this.message=o.msg})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(a.gz),t.Y36(p.e))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-confirm-user-page"]],decls:5,vars:1,consts:[[1,"auth-container"],["routerLink","'login'"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"button",1),t._uU(4,"Ir a login"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(i.message))},dependencies:[a.rH]})}return e})()},{path:"**",redirectTo:"login",pathMatch:"full"}]}];let y=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(v),a.Bz]})}return e})(),w=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[g.ez,y,s.u5,s.UX,a.Bz]})}return e})()}}]);